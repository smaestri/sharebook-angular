[{"/home/sylvain/workspace/sharebook/frontend/src/index.js":"1","/home/sylvain/workspace/sharebook/frontend/src/App.js":"2","/home/sylvain/workspace/sharebook/frontend/src/reportWebVitals.js":"3","/home/sylvain/workspace/sharebook/frontend/src/components/add-book/AddBook.js":"4","/home/sylvain/workspace/sharebook/frontend/src/components/list-books/ListBooks.js":"5","/home/sylvain/workspace/sharebook/frontend/src/components/login/Login.js":"6","/home/sylvain/workspace/sharebook/frontend/src/components/my-books/MyBooks.js":"7","/home/sylvain/workspace/sharebook/frontend/src/components/my-borrows/MyBorrows.js":"8","/home/sylvain/workspace/sharebook/frontend/src/components/header/Header.js":"9","/home/sylvain/workspace/sharebook/frontend/src/components/add-user/AddUser.js":"10","/home/sylvain/workspace/sharebook/frontend/src/components/home/Home.js":"11","/home/sylvain/workspace/sharebook/frontend/src/components/book/Book.js":"12","/home/sylvain/workspace/sharebook/frontend/src/context/UserContext.js":"13","/home/sylvain/workspace/sharebook/frontend/src/components/modal/DeleteBookModal.js":"14","/home/sylvain/workspace/sharebook/frontend/src/components/modal/SimpleModal.js":"15"},{"size":478,"mtime":1608064190578,"results":"16","hashOfConfig":"17"},{"size":3817,"mtime":1610916058569,"results":"18","hashOfConfig":"17"},{"size":362,"mtime":1608047324813,"results":"19","hashOfConfig":"17"},{"size":3181,"mtime":1611325884344,"results":"20","hashOfConfig":"17"},{"size":1404,"mtime":1610916717528,"results":"21","hashOfConfig":"17"},{"size":1511,"mtime":1610879055281,"results":"22","hashOfConfig":"17"},{"size":2669,"mtime":1611055829389,"results":"23","hashOfConfig":"17"},{"size":1466,"mtime":1610558690616,"results":"24","hashOfConfig":"17"},{"size":1188,"mtime":1610558337625,"results":"25","hashOfConfig":"17"},{"size":2222,"mtime":1610879352162,"results":"26","hashOfConfig":"17"},{"size":233,"mtime":1608470353639,"results":"27","hashOfConfig":"17"},{"size":818,"mtime":1610826979731,"results":"28","hashOfConfig":"17"},{"size":153,"mtime":1608472899075,"results":"29","hashOfConfig":"17"},{"size":764,"mtime":1608499285123,"results":"30","hashOfConfig":"17"},{"size":556,"mtime":1608544737917,"results":"31","hashOfConfig":"17"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},"1ftw2x9",{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"41","usedDeprecatedRules":"34"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"54","usedDeprecatedRules":"34"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"59"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},"/home/sylvain/workspace/sharebook/frontend/src/index.js",[],["66","67"],"/home/sylvain/workspace/sharebook/frontend/src/App.js",[],"/home/sylvain/workspace/sharebook/frontend/src/reportWebVitals.js",[],"/home/sylvain/workspace/sharebook/frontend/src/components/add-book/AddBook.js",["68"],"import React from 'react'\nimport axios from 'axios'\nimport { useHistory, Link } from \"react-router-dom\";\n\nimport './AddBook.scss'\n\nfunction AddBook(props) {\n    const history = useHistory();\n    const [bookData, setBookData] = React.useState({name: '', categoryId: 0})\n    const [categories, setCategories] = React.useState({})\n\n    const fetchBook = (idBook) => {\n        axios.get(`/books/${idBook}`).then(response => {\n            if (response && response.data) {\n                setBookData({ name: response.data.name, categoryId: response.data.category.id })\n            }\n        })\n    }\n\n    const fetchCategories = () => {\n        axios.get('/categories/').then(response => {\n            if (response && response.data) {\n                setCategories(response.data)\n                // Exercice : try to not put line below\n                setBookData({ name: '', categoryId: response.data[0].id})\n            }\n        }).then(()=> {\n            if (props.params && props.params.bookId) {\n                // edit book\n                fetchBook(props.params.bookId);\n            }\n        })\n    }\n\n    React.useEffect(() => {\n        fetchCategories();\n    }, []);\n\n    const handleInputChange = (e) => {\n        let obj = { ...bookData }\n        obj[e.target.name] = e.target.value\n        setBookData(obj)\n    }\n\n    const onSubmit = (event) => {\n        event.preventDefault();\n        if (props.params && props.params.bookId) {\n            //use PUT, not POST\n            axios.put(`/books`, {\n                ...bookData, id: props.params.bookId,\n            }).then(response => {\n                history.push(\"/myBooks\");\n            }).catch(error => {\n                alert('Erreur détectée : ' + error.response.data)\n            })\n        } else {\n            axios.post(`/books`, {\n                ...bookData,\n            }).then(() => {\n                history.push(\"/myBooks\");\n            }).catch(error => {\n                alert('Erreur détectée : ' + error.response.data.errors[0].defaultMessage)\n            })\n        }\n    }\n\n    return (\n        <div className=\"container-add-book\">\n            <h1>Ajouter un livre</h1>\n            <form onSubmit={onSubmit}>\n                <div>\n                    <label>Nom du livre</label>\n                    <input name=\"name\" type=\"text\" className=\"form-control\" value={bookData.name} onChange={handleInputChange} />\n                </div>\n                <div>\n                    <label>catégorie du livre</label>\n                    {categories.length > 0  ? (<select name=\"categoryId\" className=\"form-control\" value={bookData.categoryId} onChange={handleInputChange}>\n                        {categories.map(category => (\n                            <option value={category.id} key={category.id} >{category.label}</option>\n                        ))}\n                    </select>):null}\n                </div>\n\n                <div className=\"container-submit\">\n                    <input type=\"submit\" value=\"Valider\" className=\"btn btn-primary\" />\n                </div>\n            </form>\n            <div><Link to=\"/myBooks\">Retour</Link></div>\n        </div>\n    )\n}\n\nexport default AddBook;\n","/home/sylvain/workspace/sharebook/frontend/src/components/list-books/ListBooks.js",[],"/home/sylvain/workspace/sharebook/frontend/src/components/login/Login.js",[],"/home/sylvain/workspace/sharebook/frontend/src/components/my-books/MyBooks.js",[],"/home/sylvain/workspace/sharebook/frontend/src/components/my-borrows/MyBorrows.js",[],"/home/sylvain/workspace/sharebook/frontend/src/components/header/Header.js",[],"/home/sylvain/workspace/sharebook/frontend/src/components/add-user/AddUser.js",["69"],"import React, { useContext } from 'react'\nimport axios from 'axios'\nimport {\n  Link,\n} from 'react-router-dom'\nimport UserContext from '../../context/UserContext'\nimport './AddUser.scss'\n\nexport default class AddUser extends React.Component {\n\n  constructor() {\n    super();\n    this.state = { userData: {} }\n  }\n\n\n  handleInputChange = (e) => {\n    let obj = { ...this.state.userData }\n    obj[e.target.name] = e.target.value\n    //setUserData(obj)\n    this.setState({userData: {...obj}})\n  }\n\n  onSubmit = (event) => {\n    //retrieve context\n    if (!this.context || !this.context.updateUserInfo) {\n      return;\n    }\n\n    event.preventDefault();\n    axios.post('/users', {\n      ...this.state.userData\n    }).then(response => {\n      this.context.updateUserInfo({ /*token: response.data.token,*/ userId: response.data.id, userName: response.data.firstName + \" \" + response.data.lastName })\n    })\n  }\n\n  render() {\n    return (\n      <div className=\"add-user-container\">\n        <div>\n          <h1>M'inscrire</h1>\n          <div>\n            <form onSubmit={this.onSubmit}>\n              <div>\n                <label>email</label>\n                <input name=\"email\" type=\"text\" className=\"form-control\" onChange={this.handleInputChange} />\n              </div>\n              <div>\n                <label>nom</label>\n                <input name=\"lastName\" type=\"text\" className=\"form-control\" onChange={this.handleInputChange} />\n              </div>\n              <div>\n                <label>prenom</label>\n                <input name=\"firstName\" type=\"text\" className=\"form-control\" onChange={this.handleInputChange} />\n              </div>\n              <div>\n                <label>password</label>\n                <input name=\"password\" type=\"password\" className=\"form-control\" onChange={this.handleInputChange} />\n              </div>\n              <div className=\"container-valid text-center\">\n                <input type=\"submit\" value=\"Valider\" className=\"btn btn-primary\" onChange={this.handleInputChange} />\n              </div>\n            </form>\n          </div>\n          <div><Link to=\"/\">Retour à l'accueil</Link></div>\n        </div>\n      </div>\n    )\n\n  }\n  \n}\nAddUser.contextType = UserContext;","/home/sylvain/workspace/sharebook/frontend/src/components/home/Home.js",[],"/home/sylvain/workspace/sharebook/frontend/src/components/book/Book.js",[],["70","71"],"/home/sylvain/workspace/sharebook/frontend/src/context/UserContext.js",[],"/home/sylvain/workspace/sharebook/frontend/src/components/modal/DeleteBookModal.js",[],"/home/sylvain/workspace/sharebook/frontend/src/components/modal/SimpleModal.js",[],{"ruleId":"72","replacedBy":"73"},{"ruleId":"74","replacedBy":"75"},{"ruleId":"76","severity":1,"message":"77","line":37,"column":8,"nodeType":"78","endLine":37,"endColumn":10,"suggestions":"79"},{"ruleId":"80","severity":1,"message":"81","line":1,"column":17,"nodeType":"82","messageId":"83","endLine":1,"endColumn":27},{"ruleId":"72","replacedBy":"84"},{"ruleId":"74","replacedBy":"85"},"no-native-reassign",["86"],"no-negated-in-lhs",["87"],"react-hooks/exhaustive-deps","React Hook React.useEffect has a missing dependency: 'fetchCategories'. Either include it or remove the dependency array.","ArrayExpression",["88"],"no-unused-vars","'useContext' is defined but never used.","Identifier","unusedVar",["86"],["87"],"no-global-assign","no-unsafe-negation",{"desc":"89","fix":"90"},"Update the dependencies array to be: [fetchCategories]",{"range":"91","text":"92"},[1168,1170],"[fetchCategories]"]